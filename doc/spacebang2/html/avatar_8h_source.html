<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SpaceBang2: C:/Users/Asylum/Documents/Save/Projects/DummyFramework/projects/spacebang2/avatar.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>C:/Users/Asylum/Documents/Save/Projects/DummyFramework/projects/spacebang2/avatar.h</h1><a href="avatar_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//=============================================================================================================</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef _AVATAR_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define _AVATAR_H_</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="gameelement_8h.html">gameelement.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;dummyframework/base/d3d9/CSprite9.h&gt;</span>
<a name="l00007"></a>00007 
<a name="l00013"></a><a class="code" href="class_avatar.html">00013</a> <span class="keyword">class </span><a class="code" href="class_avatar.html" title="The character controlled by the player.">Avatar</a> : <span class="keyword">public</span> <a class="code" href="class_game_element.html" title="Base class for game entities.">GameElement</a>, <span class="keyword">public</span> DummyFramework::has_slots
<a name="l00014"></a>00014 {
<a name="l00015"></a>00015     <span class="keyword">enum</span> action
<a name="l00016"></a>00016     {
<a name="l00017"></a>00017         Idle = 0,
<a name="l00018"></a>00018         Up = 1,
<a name="l00019"></a>00019         Down = 2,
<a name="l00020"></a>00020         Forward = 4,
<a name="l00021"></a>00021         Backward = 8,
<a name="l00022"></a>00022         Shoot = 16
<a name="l00023"></a>00023     };
<a name="l00024"></a>00024 
<a name="l00025"></a>00025     <span class="keyword">struct </span>sinexpi
<a name="l00026"></a>00026     {
<a name="l00027"></a>00027         <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">float</span> y(<span class="keywordtype">float</span> x) {
<a name="l00028"></a>00028             <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)sin(x * D3DX_PI) * 1.2f;
<a name="l00029"></a>00029         }
<a name="l00030"></a>00030     };
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="keyword">private</span>:
<a name="l00033"></a>00033     DummyFramework::syncedanimator&lt;float, 5, sinexpi&gt; power;
<a name="l00034"></a>00034     DummyFramework::syncedanimator&lt;float, 5, sinexpi&gt; shield;
<a name="l00035"></a>00035 
<a name="l00036"></a>00036     D3DXVECTOR2                velocity;
<a name="l00037"></a>00037     D3DXVECTOR2                direction;
<a name="l00038"></a>00038     D3DXVECTOR2                resistance;
<a name="l00039"></a>00039     <span class="keywordtype">size_t</span>                     empowerticks;
<a name="l00040"></a>00040     <span class="keywordtype">size_t</span>                     flashticks;
<a name="l00041"></a>00041     <span class="keywordtype">int</span>                        shieldticks;
<a name="l00042"></a>00042     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              state;
<a name="l00043"></a>00043     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             cooldown;          
<a name="l00044"></a>00044     <span class="keywordtype">char</span>                       bindings[5][2];    
<a name="l00045"></a>00045     <span class="keywordtype">bool</span>                       disablecontrols;
<a name="l00046"></a>00046     <span class="keywordtype">bool</span>                       drawornot;         
<a name="l00048"></a>00048 <span class="keyword">public</span>:
<a name="l00049"></a><a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5b">00049</a>     <span class="keyword">enum</span> <a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5b">avatarstate</a>
<a name="l00050"></a>00050     {
<a name="l00051"></a><a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5beda1f424b3a87a6607cd921f02fe4b51">00051</a>         <a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5beda1f424b3a87a6607cd921f02fe4b51">Empowered</a> = 32,
<a name="l00052"></a><a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5b83883f7b3075922cfdbb918fade7c63a">00052</a>         <a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5b83883f7b3075922cfdbb918fade7c63a">Exploded</a> = 64,
<a name="l00053"></a><a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5bd90a0dd5c4c3781fd9e2ee329f670665">00053</a>         <a class="code" href="class_avatar.html#4853b5e877e6718d6a026e6185237c5bd90a0dd5c4c3781fd9e2ee329f670665">Invincible</a> = 128
<a name="l00054"></a>00054     };
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="class_avatar.html#69846cc980c017d47f9f9f264e57e8a6">00056</a>     DummyFramework::CSprite9*  <a class="code" href="class_avatar.html#69846cc980c017d47f9f9f264e57e8a6">Image</a>;
<a name="l00057"></a><a class="code" href="class_avatar.html#0da4a0792a4e0e367392d57a9e051655">00057</a>     DummyFramework::CSprite9*  <a class="code" href="class_avatar.html#0da4a0792a4e0e367392d57a9e051655">Lights</a>;
<a name="l00058"></a><a class="code" href="class_avatar.html#3d1ed72cc18c67daf1c223805239e6b4">00058</a>     DummyFramework::CSprite9*  <a class="code" href="class_avatar.html#3d1ed72cc18c67daf1c223805239e6b4">Shield</a>;        
<a name="l00059"></a><a class="code" href="class_avatar.html#870aefb861d3171e111ec5f0c65e874d">00059</a>     D3DXVECTOR2                <a class="code" href="class_avatar.html#870aefb861d3171e111ec5f0c65e874d" title="Starting position on the screen.">InitialPosition</a>;   
<a name="l00060"></a><a class="code" href="class_avatar.html#866f75e9eca556d1befb01dafe20f439">00060</a>     D3DXVECTOR2                <a class="code" href="class_avatar.html#866f75e9eca556d1befb01dafe20f439" title="Starting position of projectiles (%).">ProjectileOrigin</a>;  
<a name="l00061"></a><a class="code" href="class_avatar.html#dfae5e13815a66b687ac0074f49435b6">00061</a>     D3DXVECTOR4                <a class="code" href="class_avatar.html#dfae5e13815a66b687ac0074f49435b6" title="Movement limits.">Bounds</a>;            
<a name="l00062"></a><a class="code" href="class_avatar.html#3df68c9876c498e0387918d6d6729d47">00062</a>     <a class="code" href="gameelement_8h.html#c05815b45121a0e0319d3916a5948db0">syncedvector</a>               <a class="code" href="class_avatar.html#3df68c9876c498e0387918d6d6729d47">Position</a>;
<a name="l00063"></a><a class="code" href="class_avatar.html#c0372d8f556b4dc3a7a892545e8594ce">00063</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#c0372d8f556b4dc3a7a892545e8594ce" title="Delay until next weapon fire.">WeaponCooldown</a>;    
<a name="l00064"></a><a class="code" href="class_avatar.html#6abc552b3c6aeb99830a5ee95534c9df">00064</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#6abc552b3c6aeb99830a5ee95534c9df">Cannons</a>;
<a name="l00065"></a><a class="code" href="class_avatar.html#0cf0369bbdfea67bf8069be94181c266">00065</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#0cf0369bbdfea67bf8069be94181c266">Health</a>;
<a name="l00066"></a><a class="code" href="class_avatar.html#04b1dd6743646a7245247359f58e81be">00066</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#04b1dd6743646a7245247359f58e81be" title="Shield integrity.">Integrity</a>;         
<a name="l00067"></a><a class="code" href="class_avatar.html#002f09396f1f5a87a3c5512b5720d4a7">00067</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#002f09396f1f5a87a3c5512b5720d4a7">MaxHealth</a>;
<a name="l00068"></a><a class="code" href="class_avatar.html#0070472e2444c95950e8967b1349e10a">00068</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#0070472e2444c95950e8967b1349e10a">MaxIntegrity</a>;
<a name="l00069"></a><a class="code" href="class_avatar.html#1fb77905e7beb5206fc6f0809cfecc3c">00069</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>             <a class="code" href="class_avatar.html#1fb77905e7beb5206fc6f0809cfecc3c">MaxLife</a>;
<a name="l00070"></a><a class="code" href="class_avatar.html#1037e4489bf6902c8f455e4f9e69695f">00070</a>     <span class="keywordtype">float</span>                      <a class="code" href="class_avatar.html#1037e4489bf6902c8f455e4f9e69695f">Speed</a>;
<a name="l00071"></a><a class="code" href="class_avatar.html#52f8f7881213d061b68fb21225087f67">00071</a>     <span class="keywordtype">float</span>                      <a class="code" href="class_avatar.html#52f8f7881213d061b68fb21225087f67">Acceleration</a>;
<a name="l00072"></a><a class="code" href="class_avatar.html#99c4b8c0a786e9357c6dd4d06a17b86d">00072</a>     <span class="keywordtype">float</span>                      <a class="code" href="class_avatar.html#99c4b8c0a786e9357c6dd4d06a17b86d">Resistance</a>;
<a name="l00073"></a><a class="code" href="class_avatar.html#0d9b125ab0b40c06d29738123db8a95d">00073</a>     <span class="keywordtype">float</span>                      <a class="code" href="class_avatar.html#0d9b125ab0b40c06d29738123db8a95d" title="Speed of projectiles.">ProjectileSpeed</a>;   
<a name="l00075"></a>00075     <a class="code" href="class_avatar.html#14b9eb31495b4f7db9d52c64b78f40b0">Avatar</a>();
<a name="l00076"></a><a class="code" href="class_avatar.html#0d6504f2cb45987ebfcd8736d553ec0d">00076</a>     <a class="code" href="class_avatar.html#0d6504f2cb45987ebfcd8736d553ec0d">~Avatar</a>() {}
<a name="l00077"></a>00077     
<a name="l00079"></a>00079     <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#8b7a406729cbbebb46b8c9df5055978a" title="Call this when the avatar is hit.">Hit</a>(D3DXVECTOR2 pos);
<a name="l00080"></a>00080 
<a name="l00082"></a>00082     <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#b0bc9d8381b9601019b45bba384bff0c" title="Resets the avatar&amp;#39;s properties.">Reset</a>();
<a name="l00083"></a>00083 
<a name="l00085"></a>00085     <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#b57341dc19c5a28eb09427a1a52f96eb" title="Puts the avatar into a new state.">SetState</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> newstate);
<a name="l00086"></a>00086 
<a name="l00088"></a>00088     <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#0f86d48abb99699dd41e10f40ec02735" title="Fixed timestep update.">Update</a>();
<a name="l00089"></a>00089 
<a name="l00091"></a>00091     <span class="keywordtype">size_t</span> <a class="code" href="class_avatar.html#b87a488251fdb2103e94e4d9f7270e55" title="Writes the sprites used by the avatar into the dynamic buffer.">Write</a>(<span class="keywordtype">size_t</span> start, <a class="code" href="gameelement_8h.html#c448fcb10d445b68d53c6538ee07c26c">quadbuffer</a>&amp; quad);
<a name="l00092"></a>00092 
<a name="l00094"></a><a class="code" href="class_avatar.html#d402cab35b3cfb4427a00827b1db1e52">00094</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#d402cab35b3cfb4427a00827b1db1e52" title="Binds the specified key to the action as primary.">BindPrimary</a>(<span class="keywordtype">char</span> index, <span class="keywordtype">char</span> key) {
<a name="l00095"></a>00095         bindings[index][0] = key;
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097 
<a name="l00099"></a><a class="code" href="class_avatar.html#63f79381f6d74225ec11d77474ba57db">00099</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#63f79381f6d74225ec11d77474ba57db" title="Binds the specified key to the action as secondary.">BindSecondary</a>(<span class="keywordtype">char</span> index, <span class="keywordtype">char</span> key) {
<a name="l00100"></a>00100         bindings[index][1] = key;
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 
<a name="l00104"></a><a class="code" href="class_avatar.html#4fb121baa9f602cf587ba84093ba174c">00104</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#4fb121baa9f602cf587ba84093ba174c" title="Disables user input for the avatar.">DisableControls</a>(<span class="keywordtype">bool</span> disable) {
<a name="l00105"></a>00105         disablecontrols = disable;
<a name="l00106"></a>00106         velocity.x = velocity.y = 0;
<a name="l00107"></a>00107                 
<a name="l00108"></a>00108                 <a class="code" href="class_avatar.html#f3bddc16fac2315f8265d03e9a295b6a" title="Remove states related to keyboard.">FlushControlStates</a>();
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110 
<a name="l00112"></a><a class="code" href="class_avatar.html#f3bddc16fac2315f8265d03e9a295b6a">00112</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#f3bddc16fac2315f8265d03e9a295b6a" title="Remove states related to keyboard.">FlushControlStates</a>() {
<a name="l00113"></a>00113                 state = state &amp; (0xffffffe0);
<a name="l00114"></a>00114         }
<a name="l00115"></a>00115             
<a name="l00117"></a><a class="code" href="class_avatar.html#31ea42fd4bdab18e76cf7970225c4a3a">00117</a>     <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="class_avatar.html#31ea42fd4bdab18e76cf7970225c4a3a" title="Gets the avatar&amp;#39;s current state.">GetState</a>()<span class="keyword"> const </span>{
<a name="l00118"></a>00118         <span class="keywordflow">return</span> state;
<a name="l00119"></a>00119     }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 events:
<a name="l00122"></a><a class="code" href="class_avatar.html#bcf45383424ed807bfdfc80aac61f392">00122</a>     DummyFramework::unisignal0 <a class="code" href="class_avatar.html#bcf45383424ed807bfdfc80aac61f392" title="Fires when the user hits the shoot key.">shoot</a>;       
<a name="l00123"></a><a class="code" href="class_avatar.html#80d00f76ce9c6b49fba45161f779c7a0">00123</a>     DummyFramework::unisignal0 <a class="code" href="class_avatar.html#80d00f76ce9c6b49fba45161f779c7a0" title="Fires when the avatar gets a deadly blow.">dead</a>;        
<a name="l00124"></a><a class="code" href="class_avatar.html#1f9f3a0729d33bc393728870aa59b219">00124</a>     DummyFramework::unisignal0 <a class="code" href="class_avatar.html#1f9f3a0729d33bc393728870aa59b219" title="Fires when the avatar loses health.">explode</a>;     
<a name="l00126"></a>00126 eventhandlers:
<a name="l00127"></a>00127     <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#009d020c51afbb73825ba20354321811">onkeydown</a>(<span class="keyword">const</span> DummyFramework::skeyboardstate&amp; kbstate);
<a name="l00128"></a>00128     <span class="keywordtype">void</span> <a class="code" href="class_avatar.html#5a32567417efa64e845ef805d17351db">onkeyup</a>(<span class="keyword">const</span> DummyFramework::skeyboardstate&amp; kbstate);
<a name="l00129"></a>00129 };
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="preprocessor">#endif</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span><span class="comment">//=============================================================================================================</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jul 26 12:29:18 2011 for SpaceBang2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
